description: "refgenie recipe file schema"
properties:
  name:
    type: string
    pattern: "^\\S*$"
  version:
    type: string
    pattern: "^\\S*$"
  description:
    type: string
  inputs:
    type: object
    additionalProperties: false
    patternProperties:
      files|params:
        anyOf:
          [
            {
              type: object,
              additionalProperties: false,
              patternProperties: { ^.*$: { "$ref": "#/definitions/input" } },
            },
            { type: "null" },
          ]
      assets:
        anyOf:
          [
            {
              type: object,
              additionalProperties: false,
              patternProperties:
                { ^.*$: { "$ref": "#/definitions/input_asset" } },
            },
            { type: "null" },
          ]

  output_asset_class:
    type: string
  container:
    type: string
  custom_properties:
    type: object
    additionalProperties: false
    patternProperties:
      ^.*$:
        type: string
  default_tag:
    type: string
  command_template_list:
    type: array
    items:
      type: string
  checksum_exclude_list:
    description: "A list of paths to exclude from asset checksum calculation. The paths can include regex and must be relative to the asset outfolder."
    type: array
    items:
      type: string
required:
  - name
  - version
  - inputs
  - output_asset_class
  - command_template_list

definitions:
  input:
    type: object
    properties:
      description:
        type: string
    required:
      - description
  input_asset:
    type: object
    properties:
      description:
        type: string
      asset_class:
        type: string
    required:
      - description
      - asset_class
  inputs:
    type: object
    additionalProperties: false
    patternProperties:
      ^.*$: { "$ref": "#/definitions/input" }
